/*!
 * Codecolor.js v1.0.0
 * https://codecolorjs.pw/
 *
 * (c) 2018-2019 Daniil Ryazanov <opensource@tagproject.ru>
 * Released under the MIT License.
 */

(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.codecolor=b())})(this,function(){"use strict";var a="source",b=function(){function a(a,b){this.name=void 0,this.expressions=void 0,this.keywords=void 0,this.masks=void 0,this.activeKeywords=void 0,this.activeExpressions=void 0,this.name=a,this.expressions=b.expressions.values,this.activeExpressions=b.expressions.names,this.keywords="object"==typeof b.keywords?b.keywords.values:[],this.activeKeywords="object"==typeof b.keywords?b.keywords.names:[],this.masks=b.masks}var b=a.prototype;return b.eachExp=function(a){var b=this;this.expressions.forEach(function(c,d){c.forEach(function(c,e){a(b.activeExpressions[d],c,e)})})},b.getKeywordName=function(a){for(var b,c=a[0],d=0;(b=this.keywords[d])&&!(b[c]&&~b[c].indexOf(a));)d++;return this.activeKeywords[d]},b.getMask=function(a,b){var c;return"undefined"!=typeof this.masks&&Array.isArray(this.masks[a])&&!!this.masks[a][b]&&(c=this.masks[a][b]),c},a}(),c=function(){function b(a,b,c,d){this.name=void 0,this.value=void 0,this.start=void 0,this.end=void 0,this.ruleIndex=void 0,this.name=a,this.value=b,this.start=c,this.end=c+b.length,this.ruleIndex=d}var c=b.prototype;return c.isIncludedIn=function(a){return this.start>=a.start&&this.end<=a.end},c.isCross=function(a){return this.start>=a.start&&this.start<=a.end&&this.end>=a.end},c.isSource=function(){return this.name===a},b}(),d=function(){function b(a,b,c){this.code=void 0,this.languages=void 0,this.language=void 0,this.tokens=void 0,this.code=a,this.languages=c,this.language=c[b],this.tokens=[]}b.parse=function(a,c,d){var e=new b(a,c,d);return e.analize(),e.render()};var d=b.prototype;return d.analize=function(){var a,b,d,e,f=this,g=NaN,h=this.tokens,i=function(a){return~~(a/2)},j=function a(b,c){if(c<=h.length&&b<c){if(e=h[c-1],e.end<=d.start)return a(c,c+i(h.length-c+1));if(e.start>=d.end)return a(b,b+i(c-b));if(d.isIncludedIn(e))return-Infinity;if(e.isIncludedIn(d))return 1===c?1/0:-(c-1);if(e.isCross(d))return 1/0}return c};this.language.eachExp(function(e,k,l){var m=Math.abs,n=Number.isFinite,o=Math.max;for(b=new RegExp(k,"gm");a=b.exec(f.code);)d=new c(e,a[0],a.index,l),0<=(g=j(0,o(i(h.length),1)))?n(g)?h.splice(g,0,d):h[0]=d:n(g)&&(h[m(g)]=d)})},d.wrap=function(c){var d,e=function(a,b){return"<span class=\"cc-"+a+"\">"+b+"</span>"},f=c.isSource()?this.language.getKeywordName(c.value):c.name;if("undefined"==typeof f)d=c.value;else{var g=this.language.getMask(f,c.ruleIndex);if("undefined"==typeof g)d=e(f,c.value);else if("string"==typeof g)d=e(f+" cc-"+g,c.value);else{for(var h,i=g[0],j=g[1],k=g[2],l=new RegExp(i,"gm"),m=[],n=0;h=l.exec(c.value);)m.push(c.value.substring(n,h.index),e(k||a,b.parse(h[0],j,this.languages))),n=l.lastIndex;m.push(c.value.substring(n,c.value.length)),d=e(f,m.join(""))}}return d},d.render=function(){var a=this,b=[],c=0;return this.tokens.forEach(function(d){c<d.start&&b.push(a.code.substring(c,d.start)),b.push(a.wrap(d)),c=d.end}),b.push(this.code.substring(c)),b.join("")},b}(),e=function(){function a(){this.version="1.0.0",this.languages={},this.activeSchema=void 0}var c=a.prototype;return c.highlight=function(a,b){return["<pre><code class=\"cc-container\">",d.parse(a,b||this.activeSchema,this.languages),"</code></pre>"].join("")},c.addSchema=function(a){return this.languages[a.name]=new b(a.name,a),this.activeSchema=a.name,a.name},a}(),f=new e;return f});
