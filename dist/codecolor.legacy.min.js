/*!
 * Codecolor.js v1.0.0
 * https://codecolorjs.pw/
 *
 * (c) 2018-2018 Daniil Ryazanov <opensource@tagproject.ru>
 * Released under the MIT License.
 */

(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.codecolor=b()})(this,function(){"use strict";var a="fragment",b=["comment","template","string","number",a,"operator"],c=["keyword","primitive","builtin"],d=function(){function a(a){var d=function(a,b){return a.reduce(function(a,c){return"undefined"!=typeof b[c]&&a.push(b[c]),a},[])};this.literals=d(b,a.literals),this.statements=d(c,a.statements),this.masks="object"==typeof a.masks?a.masks:{}}var d=a.prototype;return d.eachLiterals=function(a){this.literals.forEach(function(c,d){c.forEach(function(c,e){a(b[d],c,e)})})},d.getStatementName=function(a){for(var b,d=a[0],e=0;(b=this.statements[e])&&!(b[d]&&~b[d].indexOf(a));)e++;return c[e]},d.getMask=function(a,b){return this.masks[a][b]},d.isMasked=function(a,c){return!!~b.indexOf(a)&&Array.isArray(this.masks[a])&&Array.isArray(this.masks[a][c])},a}(),e=function(){function b(a,b,c,d){this.name=a,this.value=b,this.start=c,this.end=c+b.length,this.ruleIndex=d}var c=b.prototype;return c.isIncludeIn=function(a){return this.start>=a.start&&this.end<=a.end},c.isFragment=function(){return this.name===a},b}(),f=function(){function a(a,b,c){this.code=a,this.languages=c,this.language=c[b],this.tokens=[]}a.parse=function(b,c,d){var e=new a(b,c,d);return e.analize(),e.render()};var b=a.prototype;return b.analize=function(){var a,b,c,d,f=this,g=NaN,h=this.tokens,i=function(a){return~~(a/2)},j=function a(b,e){if(e<=h.length&&b<e){if(d=h[e-1],d.end<=c.start)return a(e,e+i(h.length-e+1));if(d.start>=c.end)return a(b,b+i(e-b));if(c.isIncludeIn(d))return NaN;if(d.isIncludeIn(c))return-(e-1)}return e};this.language.eachLiterals(function(d,k,l){var m=Math.abs,n=Math.max;for(b=new RegExp(k,"gm");a=b.exec(f.code);)c=new e(d,a[0],a.index,l),0<=(g=j(0,n(i(h.length),1)))?h.splice(g,0,c):h[m(g)]=c})},b.wrap=function(b){var c,d=function(a,b){return"<span class=\"cc-"+a+"\">"+b+"</span>"},e=b.isFragment()?this.language.getStatementName(b.value):b.name;if("undefined"==typeof e)c=b.value;else if(this.language.isMasked(e,b.ruleIndex)){for(var f,g=this.language.getMask(e,b.ruleIndex),h=new RegExp(g[0],"gm"),i=[],j=0;f=h.exec(b.value);)i.push(b.value.substring(j,f.index),d(e+"-mask-"+b.ruleIndex,a.parse(f[0],g[1],this.languages))),j=h.lastIndex;i.push(b.value.substring(j,b.value.length)),c=d(e,i.join(""))}else c=d(e,b.value);return c},b.render=function(){var a=this,b=0,c=[];return this.tokens.forEach(function(d){b<d.start&&c.push(a.code.substring(b,d.start)),c.push(a.wrap(d)),b=d.end}),c.push(this.code.substring(b)),c.join("")},a}(),g=function(){function a(){Object.defineProperty(this,"version",{enumerable:!0,writable:!0,value:"1.0.0"}),Object.defineProperty(this,"languages",{enumerable:!0,writable:!0,value:{}})}var b=a.prototype;return b.highlight=function(a,b){return["<pre><code class=\"cc-container\">",f.parse(a,b||this.activeSchema,this.languages),"</code></pre>"].join("")},b.addSchema=function(a){return this.languages[a.name]=new d(a),this.activeSchema=a.name,a.name},a}(),h=new g;return h});
